# 第六章　尝试Pull Request

&emsp;&emsp;Pull Request 是社会化编程的象征。GitHub 创造的这一功能，可以说给开源开发世界带来了一场革命。不会用这个功能，就等于不会用 GitHub。
&emsp;&emsp;不过，掌握 Pull Request 的难度确实较高，刚刚接触 GitHub 的人在发送 Pull Request 时，往往会遇到找不到对方的项目或者不知道该如何发送等问题。

## 6.1　Pull Request 的概要

### 什么是 Pull Request

&emsp;&emsp;Pull Request 是自己修改源代码后，请求对方仓库采纳该修改时采取的一种行为。

> Pull Request 在网络上也常常被简称为 PR。

### Pull Request 的流程

+ **假设在使用 GitHub 上的一款开源软件**

&emsp;&emsp;在使用这款软件的过程中，偶然间发现了 BUG。为了继续使用软件，必须手动修复了这个 BUG。如果我们修改的这段代码能被该软件的开发仓库采纳，今后与我们同样使用这款软件的人就不会再遇到这个 BUG。为此，我们要第一时间发送 Pull Request。
&emsp;&emsp;在 GitHub 上发送 Pull Request 后，接收方的仓库会创建一个附带源代码的 Issue，我们在这个 Issue 中记录详细内容。这就是 Pull Request。
&emsp;&emsp;发送过去的 Pull Request 是否被采纳，要由接收方仓库的管理者进行判断。一般只要代码没有问题，对方都会采纳。如果有问题，我们会收到评论。
&emsp;&emsp;只要 Pull Request 被顺利采纳，我们就会成为这个项目的 Contributor（贡献者），我们编写的这段代码也将被全世界的人使用。这正是社会化编程和开源开发的一大乐趣。

## 6.2　发送 Pull Request 前的准备

### 查看要修正的源代码

&emsp;&emsp;请登录为各位准备的网站<https://ituring.github.io/first-pr/>。该网站的源代码已经在 GitHub 上公开 <https://github.com/ituring/first-pr>。各位请将自己的感想写入源代码，然后发送 Pull Request。
&emsp;&emsp;这个网站通过 GitHub 的 GitHub Pages 功能发布。GitHub Pages 的网站的源代码位于仓库的 gh-pages 分支。访问仓库页面，就可以看到源代码。

#### Fork

&emsp;&emsp;请访问仓库页面，点击 Fork 按钮创建自己的仓库。新建的仓库名 为“自己的账户名 /first-pr”。在这里我们命名为 hirocastest。

#### clone

&emsp;&emsp;clone 仓库所需的访问信息显示在右侧的中央部分，将它复制下来，把这个仓库 clone 到当前的开发环境中。

```shell
$ git clone git@github.com:hirocastest/first-pr.git
Cloning into 'first-pr'...
remote: Counting objects: 14, done.
remote: Compressing objects: 100% (12/12), done.
remote: Total 14 (delta 2), reused 0 (delta 0)
Receiving objects: 100% (14/14), 24.05 KiB, done.
Resolving deltas: 100% (2/2), done.
$ cd first-pr
```

&emsp;&emsp;first-pr 目录下会生成 Git 仓库。这个仓库与 GitHub 账户下的 first-pr 仓库状态相同。现在只要在这个仓库中修改源代码进行 push，GitHub 账户中的仓库就会被修改。

#### branch

##### 为何要在特性分支中进行作业

&emsp;&emsp;养成创建特性分支后再修改代码的好习惯。在 GitHub 上发送 Pull Request 时，一般都是发送特性分支。这样一来，Pull Request 就拥有了更明确的特性（主题）。让对方了解自己修改代码的意图，有助于提高代码审查的效率。

##### 确认分支

&emsp;&emsp;查看一下 clone 出的仓库的分支。

```shell
$ git branch -a
* gh-pages       ←当前分支
  remotes/origin/HEAD -> origin/gh-pages
  remotes/origin/gh-pages
```

&emsp;&emsp;开头加了“remotes/origin/”的是 GitHub 端仓库的分支。现在手头的开发环境中只有 gh-pages 分支。
&emsp;&emsp;网站中显示的 HTML 位于 /origin/gh-pages 分支。虽然通常情况下最新版代码都位于 master 分支，但由于本次使用了 GitHub Pages，所以最新代码位于 gh-pages 分支。

##### 创建特性分支

&emsp;&emsp;创建一个名为 work 的分支，用来发送 Pull Request。这个 work 分支就是这次的特性分支。现在创建 work 分支并自动切换。

```shell
$ git checkout -b work gh-pages
Switched to a new branch 'work'
```













































































































